
> painel-metalgalvano-backend@1.0.0 test
> jest src/tests/controllers/formsController.test.ts

  console.log
    res.json called with: {
      "success": true,
      "message": "Formul√°rio criado com sucesso",
      "data": {
        "reportId": "form-1",
        "osId": "123"
      }
    }

      at Object.<anonymous> (src/tests/controllers/formsController.test.ts:60:15)

  console.log
    res.json called with: {
      "success": true,
      "data": [],
      "pagination": {}
    }

      at Object.<anonymous> (src/tests/controllers/formsController.test.ts:60:15)

  console.log
    res.json called with: {
      "success": true,
      "data": {
        "id": "form-1",
        "formName": "Test Form",
        "formType": "checklist",
        "formData": {},
        "photoUrls": [],
        "submittedBy": "Test",
        "gerenteId": "test",
        "originatingFormId": "form-1"
      }
    }

      at Object.<anonymous> (src/tests/controllers/formsController.test.ts:60:15)

FAIL src/tests/controllers/formsController.test.ts
  FormsController
    createForm
      √ó should create a form and return 201 (31 ms)
    listForms
      ‚àö should list forms (4 ms)
    getFormById
      √ó should return form details (4 ms)

  ‚óè FormsController ‚Ä∫ createForm ‚Ä∫ should create a form and return 201

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: 201

    Number of calls: 0

    [0m [90m 93 |[39m       expect(next)[33m.[39mnot[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m 94 |[39m       expect([33mFormService[39m[33m.[39mprototype[33m.[39mcreateForm)[33m.[39mtoHaveBeenCalled()[33m;[39m
    [31m[1m>[22m[39m[90m 95 |[39m       expect(mockStatus)[33m.[39mtoHaveBeenCalledWith([35m201[39m)[33m;[39m
     [90m    |[39m                          [31m[1m^[22m[39m
     [90m 96 |[39m       expect(mockJson)[33m.[39mtoHaveBeenCalledWith(expect[33m.[39mobjectContaining({ success[33m:[39m [36mtrue[39m }))[33m;[39m
     [90m 97 |[39m     })[33m;[39m
     [90m 98 |[39m   })[33m;[39m[0m

      at Object.<anonymous> (src/tests/controllers/formsController.test.ts:95:26)

  ‚óè FormsController ‚Ä∫ getFormById ‚Ä∫ should return form details

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: ObjectContaining {"success": true}

    Number of calls: 0

    [0m [90m 128 |[39m
     [90m 129 |[39m       expect(next)[33m.[39mnot[33m.[39mtoHaveBeenCalled()[33m;[39m
    [31m[1m>[22m[39m[90m 130 |[39m       expect(mockJson)[33m.[39mtoHaveBeenCalledWith(expect[33m.[39mobjectContaining({ success[33m:[39m [36mtrue[39m }))[33m;[39m
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 131 |[39m     })[33m;[39m
     [90m 132 |[39m   })[33m;[39m
     [90m 133 |[39m })[33m;[39m[0m

      at Object.<anonymous> (src/tests/controllers/formsController.test.ts:130:24)

Test Suites: 1 failed, 1 total
Tests:       2 failed, 1 passed, 3 total
Snapshots:   0 total
Time:        3.499 s, estimated 4 s
Ran all test suites matching /src\\tests\\controllers\\formsController.test.ts/i.
